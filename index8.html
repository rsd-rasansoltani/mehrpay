<!doctype html>
<html lang="fa">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width,initial-scale=1" />
Â  <title>Number Guessing Game â€” Ù¾Ù†Ù„ Ø´Ø±Ø·â€ŒØ¨Ù†Ø¯ÛŒ</title>
Â  
Â  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    <style>
        :root{
  /* Ù¾Ø§Ù„ÙØª Ø±Ù†Ú¯ÛŒ Ù…Ø¯Ø±Ù† â€” Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ø±Ùˆ Ø¨Ù‡ Ø¯Ù„Ø®ÙˆØ§Ù‡ ØªØºÛŒÛŒØ± Ø¨Ø¯ÛŒ */
  --bg: #0b0d10;
  --surface: linear-gradient(180deg, rgba(20,22,26,0.9), rgba(14,16,20,0.9));
  --glass: rgba(255,255,255,0.03);
  --muted: #9aa4b2;
  --primary: #5fb0ff;
  --primary-2: #3a86ff;
  --accent: #9b6bff;
  --success: #34d399;
  --danger: #fb7185;
  --border: rgba(255,255,255,0.04);
  --card-shadow: 0 8px 30px rgba(3,6,15,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
  --glass-border: rgba(255,255,255,0.04);
  --glass-glow: 0 6px 30px rgba(74,158,255,0.07);
  --radius-lg: 18px;
  --radius-md: 12px;
  --glass-blur: 10px;
  --trans-quick: 160ms;
  --trans-std: 260ms;
  --max-width: 1100px;
}

/* base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  font-family: 'Vazirmatn', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background:
    radial-gradient(1200px 600px at 10% 10%, rgba(58,134,255,0.06), transparent 8%),
    radial-gradient(900px 400px at 90% 90%, rgba(155,107,255,0.04), transparent 6%),
    var(--bg);
  color: #e6eef8;
  margin:0;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  direction: rtl;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
  padding: 28px;
}

/* container + card */
.container{ width:95%; max-width:var(--max-width); margin: 10px auto; }
.card{
  display:flex;
  flex-direction:column;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius: calc(var(--radius-lg) + 4px);
  overflow: hidden;
  box-shadow: var(--card-shadow);
  border: 1px solid var(--glass-border);
}

/* layout */
.flex{ display:flex; gap: 18px; align-items:stretch; padding:20px; flex-wrap:wrap; }
.col.panel{ flex:1; padding:28px; min-width:320px; }
.right.panel{
  width:360px; min-width:280px; padding:24px;
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));
  border-left: 6px solid transparent;
  display:flex; flex-direction:column; gap:18px;
  align-items:stretch;
}

/* headers */
h1, h2{
  margin:0 0 8px 0;
  font-weight:800;
  letter-spacing:0.2px;
  color: linear-gradient(90deg,var(--primary),var(--accent));
  background: linear-gradient(90deg,var(--primary),var(--accent));
  -webkit-background-clip: text;
  background-clip:text;
  color:transparent;
  font-size: clamp(20px, 2.2vw, 26px);
}

/* text */
.muted{ color:var(--muted); font-size:14px; line-height:1.6; }
.muted.small{ font-size:13px; opacity:0.95 }

/* inputs */
input{
  appearance:none;
  -webkit-appearance:none;
  width:100%;
  padding:12px 14px;
  border-radius:10px;
  background: linear-gradient(180deg, rgba(255,255,255,0.012), rgba(0,0,0,0.03));
  border: 1px solid var(--border);
  color: #e9f2ff;
  font-size:15px;
  outline:none;
  transition: box-shadow var(--trans-std), border-color var(--trans-std), transform var(--trans-quick);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
}
input::placeholder{ color: rgba(230,238,255,0.18) }
input:focus{
  border-color: rgba(95,176,255,0.95);
  box-shadow: var(--glass-glow);
  transform: translateY(-1px);
}

/* buttons */
button{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding:10px 14px;
  border-radius: 12px;
  font-weight:700;
  letter-spacing:0.2px;
  transition: transform var(--trans-quick), box-shadow var(--trans-quick), opacity var(--trans-std);
  border: none;
  background: transparent;
  color:inherit;
}
button:active{ transform: translateY(1px) scale(0.995) }
button:disabled{ opacity:0.5; cursor:not-allowed; transform:none }

/* primary / ghost */
button.primary{
  background: linear-gradient(90deg, var(--primary), var(--primary-2));
  color: #041027;
  box-shadow: 0 6px 22px rgba(58,134,255,0.12);
  border: 1px solid rgba(255,255,255,0.04);
}
button.primary:hover{ transform: translateY(-3px); box-shadow: 0 14px 40px rgba(58,134,255,0.14) }

button.ghost{
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
  border: 1px dashed rgba(255,255,255,0.04);
  color: var(--primary);
}
button.ghost:hover{ transform: translateY(-2px); border-color: rgba(95,176,255,0.45) }

/* controls */
.controls{ display:flex; gap:12px; margin-top:12px; align-items:center; }

/* balance box */
.balance-box{
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.03));
  padding:18px;
  border-radius:14px;
  text-align:center;
  border:1px solid rgba(255,255,255,0.02);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
}
.balance-box .muted{ font-size:13px; color:var(--muted) }
#balance{
  display:block;
  margin-top:10px;
  font-size:28px;
  font-weight:900;
  color: #dff4ff;
  letter-spacing:0.6px;
  text-shadow: 0 8px 30px rgba(58,134,255,0.05);
}

/* small helpers */
hr{ border:none; border-top:1px dashed rgba(255,255,255,0.03); margin:18px 0; }

/* lists */
ul{ padding:0; margin:0; list-style:none; }
ul li{ margin:10px 0; color:var(--muted); font-weight:600; position:relative; padding-right:18px; }
ul li::before{
  content: "";
  width:8px; height:8px; border-radius:50%;
  background: linear-gradient(180deg,var(--primary),var(--accent));
  position:absolute; right:0; top:9px;
  box-shadow:0 6px 18px rgba(58,134,255,0.08);
}

/* alert */
.alert-box{
  background: linear-gradient(180deg, rgba(255,50,50,0.04), rgba(255,50,50,0.02));
  color: var(--danger);
  padding:12px;
  border-radius:10px;
  font-weight:700;
  border:1px solid rgba(251,113,133,0.06);
  box-shadow: 0 6px 20px rgba(251,113,133,0.03);
}

/* ----- Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯ ----- */
.number-display{ display:flex; justify-content:center; align-items:center; margin-top:18px; }

.random-number-box{
  width:110px; height:110px; border-radius:18px;
  display:flex; align-items:center; justify-content:center;
  background: linear-gradient(180deg, rgba(255,255,255,0.016), rgba(0,0,0,0.06));
  border: 1px solid rgba(255,255,255,0.03);
  box-shadow: 0 12px 40px rgba(2,6,23,0.6), inset 0 -6px 18px rgba(0,0,0,0.4);
  position:relative;
  transition: transform var(--trans-std), box-shadow var(--trans-std);
  transform-origin:center center;
}
.random-number-box .value{
  display:inline-block;
  font-weight:900; font-size:44px;
  letter-spacing:1px;
  color: #e8f9ff;
  text-shadow:
    0 6px 30px rgba(90,170,255,0.06),
    0 2px 6px rgba(0,0,0,0.6);
}

/* neon glow for win state (toggle via .win on .status) */
.random-number-box.glow{
  box-shadow: 0 20px 60px rgba(58,134,255,0.12), 0 0 40px rgba(58,134,255,0.06);
  transform: translateY(-4px) scale(1.02);
}

/* spinning animation â€” keep quick and subtle */
.random-number-box.spinning{ animation: wobble 600ms ease-in-out infinite; }
@keyframes wobble{
  0%{ transform: rotate(-2deg) }
  50%{ transform: rotate(2deg) }
  100%{ transform: rotate(-2deg) }
}

/* status box */
.status{
  margin-top:16px;
  padding:12px;
  border-radius:12px;
  text-align:center;
  font-weight:800;
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));
  border:1px solid rgba(255,255,255,0.02);
}
.status.win{
  color: var(--success);
  border-color: rgba(52,211,153,0.12);
  background: linear-gradient(180deg, rgba(52,211,153,0.03), rgba(0,0,0,0.02));
}
.status.lose{
  color: var(--danger);
  border-color: rgba(251,113,133,0.08);
  background: linear-gradient(180deg, rgba(251,113,133,0.02), rgba(0,0,0,0.02));
}

/* confetti â€” Ø³Ø¨Ú©ØŒ Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ Ùˆ Ø¨Ø§ Ø§ÙÚ©Øª Ú†Ø±Ø®Ø´ */
.confetti{ position: fixed; inset:0; pointer-events:none; z-index:9999; overflow:hidden; }
.confetti i{
  position:absolute; top:-20px; width:10px; height:14px; border-radius:4px;
  opacity:0.95;
  transform-origin:center;
  animation: fall 1200ms cubic-bezier(.2,.7,.2,1) forwards;
  will-change: transform, opacity;
}
@keyframes fall{
  0%{ transform: translateY(-10vh) rotate(0deg); opacity:1 }
  70%{ opacity:1 }
  100%{ transform: translateY(110vh) rotate(720deg); opacity:0 }
}

/* responsive */
@media (max-width:980px){
  .flex{ flex-direction:column; padding:18px; }
  .right.panel{ width:100%; border-left:none; border-top:6px solid rgba(58,134,255,0.06); padding-top:18px; }
  .random-number-box{ width:96px; height:96px; }
  #balance{ font-size:22px; }
}

/* reduced motion accessibility */
@media (prefers-reduced-motion: reduce){
  .random-number-box.spinning, .confetti i, .random-number-box{ animation: none !important; transition: none !important; transform:none !important; }
}

/* tiny helpers */
.hidden{ display:none !important }
.center{ display:flex; align-items:center; justify-content:center }

    </style>

</head>
<body>
Â  <div class="container">
Â  Â  <div class="card">
Â  Â  Â  <div class="flex">
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="col panel" id="uiArea" style="border: none; box-shadow: none;">
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  <div id="loginScreen">
Â  Â  Â  Â  Â  Â  <h1>ÙˆØ±ÙˆØ¯ Ø§Ù…Ù† Ø¨Ù‡ Ù¾Ù†Ù„ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯</h1>
Â  Â  Â  Â  Â  Â  <p class="muted">Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¨Ø§Ø²ÛŒØŒ Chat ID ØªÙ„Ú¯Ø±Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ ØªØ§ Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ùˆ Ø­Ø³Ø§Ø¨ Ø´Ù…Ø§ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´ÙˆØ¯.</p>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div style="margin-top:20px">
Â  Â  Â  Â  Â  Â  Â  <label for="chatIdInput">Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… (Chat ID)</label>
Â  Â  Â  Â  Â  Â  Â  <input id="chatIdInput" placeholder="Ù…Ø«Ù„Ø§Ù‹: 123456789" />
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div class="controls">
Â  Â  Â  Â  Â  Â  Â  <button id="sendCodeBtn" class="primary" style="flex: 1;">Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯ (ØªÙ„Ú¯Ø±Ø§Ù…)</button>
Â  Â  Â  Â  Â  Â  Â  <button id="checkCodeBtn" class="ghost" style="flex: 1;">Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ú©Ø¯</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div style="margin-top:15px">
Â  Â  Â  Â  Â  Â  Â  <label for="codeInput">Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ø¯Ø±ÛŒØ§ÙØªÛŒ</label>
Â  Â  Â  Â  Â  Â  Â  <input id="codeInput" placeholder="Ú©Ø¯ 5 Ø±Ù‚Ù…ÛŒ Ø§Ø±Ø³Ø§Ù„ÛŒ" />
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div class="muted small" style="margin-top:15px">Ø­Ø¯Ø§Ù‚Ù„ Ø´Ø±Ø· Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ <strong>10,000 â›</strong> Ø§Ø³Øª.</div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div id="gameScreen" style="display:none">
Â  Â  Â  Â  Â  Â  <h2>ğŸ”¢ Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯ (Û± ØªØ§ Û³Û°)</h2>
Â  Â  Â  Â  Â  Â  <p class="muted">Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ùˆ Ø´Ø±Ø· Ø®ÙˆØ¯ Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø±Ø¯Ù‡ Ùˆ Ø´Ø§Ù†Ø³ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø§ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯.</p>

Â  Â  Â  Â  Â  Â  <div class="number-display">
Â  Â  Â  Â  Â  Â  Â  <div class="random-number-box" id="randomNumberBox">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="value">?</span>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div style="margin-top:15px">
Â  Â  Â  Â  Â  Â  Â  <label for="guessInput">Ø¹Ø¯Ø¯ Ø­Ø¯Ø³ÛŒ Ø´Ù…Ø§ (Ø¨ÛŒÙ† Û± ØªØ§ Û³Û°)</label>
Â  Â  Â  Â  Â  Â  Â  <input id="guessInput" type="number" min="1" max="30" placeholder="Ø¹Ø¯Ø¯ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" />
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div style="margin-top:15px">
Â  Â  Â  Â  Â  Â  Â  <label for="betAmount">Ù…Ù‚Ø¯Ø§Ø± Ø´Ø±Ø· (Ø­Ø¯Ø§Ù‚Ù„ 10,000)</label>
Â  Â  Â  Â  Â  Â  Â  <input id="betAmount" type="number" min="10000" value="10000" />
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="controls">
Â  Â  Â  Â  Â  Â  Â  <button id="placeBetBtn" class="primary" style="flex: 2;">Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù† Ø´Ø±Ø· Ùˆ Ú©Ø³Ø± Ù…ÙˆØ¬ÙˆØ¯ÛŒ</button>
Â  Â  Â  Â  Â  Â  Â  <button id="guessBtn" class="ghost" disabled style="flex: 1;">ğŸ¤” Ø­Ø¯Ø³ Ø¨Ø²Ù†</button>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="result" class="status">Ù†ØªÛŒØ¬Ù‡: Ù‡Ù†ÙˆØ² Ø´Ø±Ø·ÛŒ Ø¨Ø³ØªÙ‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div style="margin-top:20px" class="controls">
Â  Â  Â  Â  Â  Â  Â  Â  Â <button id="logoutBtn" class="ghost" style="width: 150px;">Ø®Ø±ÙˆØ¬ Ø§Ù…Ù† Ø§Ø² Ø­Ø³Ø§Ø¨</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <aside class="right panel" style="background: var(--color-background); border-left: 4px solid var(--color-secondary);">
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  <div class="balance-box">
Â  Â  Â  Â  Â  Â  <div class="muted">Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø­Ø³Ø§Ø¨</div>
Â  Â  Â  Â  Â  Â  <span id="balance">â€” â›</span>
Â  Â  Â  Â  Â  Â  <div class="muted" style="margin-top:10px;">Ø´Ù†Ø§Ø³Ù‡ Ø´Ù…Ø§: <strong id="currentChat">â€”</strong></div>
Â  Â  Â  Â  Â  Â  <div class="muted" id="lastUpdate">Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: â€”</div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div style="margin-top:15px" class="controls">
Â  Â  Â  Â  Â  Â  Â  <button id="refreshBtn" class="primary" style="flex:1;">Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÙˆØ¬ÙˆØ¯ÛŒ</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  <hr style="margin:25px 0;border:none;border-top:1px dashed var(--color-border);" />

Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <h2>ğŸ“ Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ø±Ø§Ù‡Ù†Ù…Ø§</h2>
Â  Â  Â  Â  Â  Â  <ul class="muted">
Â  Â  Â  Â  Â  Â  Â  <li>Û±) Ø§Ø¨ØªØ¯Ø§ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø±Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ ØªÙ„Ú¯Ø±Ø§Ù… Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯.</li>
Â  Â  Â  Â  Â  Â  Â  <li>Û²) Ø­Ø¯Ø§Ù‚Ù„ Ø´Ø±Ø· Û±Û°Û°Û°Û° Ø§Ø³Øª. Ù…Ø¨Ù„Øº Ø´Ø±Ø· Ù‡Ù†Ú¯Ø§Ù… Â«Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù† Ø´Ø±Ø·Â» Ø§Ø² Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø´Ù…Ø§ Ú©Ø³Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯.</li>
Â  Â  Â  Â  Â  Â  Â  <li>Û³) Ø¹Ø¯Ø¯ÛŒ Ø¨ÛŒÙ† **Û± ØªØ§ Û³Û°** Ø±Ø§ Ø­Ø¯Ø³ Ø¨Ø²Ù†ÛŒØ¯ Ùˆ Ù…Ù‚Ø¯Ø§Ø± Ø´Ø±Ø· Ø±Ø§ Ù…Ø´Ø®Øµ Ú©Ù†ÛŒØ¯.</li>
Â  Â  Â  Â  Â  Â  Â  <li>Û´) Ø§Ú¯Ø± Ø¹Ø¯Ø¯ Ø´Ù…Ø§ Ø¨Ø§ Ø¹Ø¯Ø¯ ØªØµØ§Ø¯ÙÛŒ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡ **ÛŒÚ©Ø³Ø§Ù†** Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯Ù‡ Ùˆ **Û³ Ø¨Ø±Ø§Ø¨Ø±** Ù…Ø¨Ù„Øº Ø´Ø±Ø· Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ø´Ù…Ø§ ÙˆØ§Ø±ÛŒØ² Ù…ÛŒâ€ŒØ´ÙˆØ¯.</li>
Â  Â  Â  Â  Â  Â  Â  <li>Ûµ) Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ† ØµÙˆØ±ØªØŒ Ù…Ø¨Ù„Øº Ø´Ø±Ø· Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆØ¯.</li>
Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  <div class="alert-box">
Â  Â  Â  Â  Â  Â  Â âš ï¸ **Ù‡Ø´Ø¯Ø§Ø±:** Ø¨Ø¹Ø¯ Ø§Ø² Â«Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù† Ø´Ø±Ø·Â»ØŒ Ù…Ø¨Ù„Øº ØºÛŒØ±Ù‚Ø§Ø¨Ù„ Ø¨Ø±Ú¯Ø´Øª Ø§Ø³Øª. Ø¨Ø§ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ø®ÙˆØ¯ Ø§Ù‚Ø¯Ø§Ù… Ú©Ù†ÛŒØ¯.
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </aside>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>

Â  <div id="confetti" class="confetti" aria-hidden="true"></div>

Â  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
Â  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
Â  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

Â  <script>
Â  Â  /* ---------- ØªÙ†Ø¸ÛŒÙ…Ø§Øª (Ú©Ø¯Ù‡Ø§ÛŒ JS Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø¨Ø§Ù‚ÛŒ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ù†Ø¯) ---------- */
Â  Â  const XOR_KEY = 'rasan_key_42';
Â  Â  const ENCODED_TOKEN_XOR = 'RVhEWVZnU1NNaA5zMyQ9CA0uBAM0JWFnGy5KU11uXDIjG25iNBtGNiI8WjQBKA==';

Â  Â  function base64Decode(s){ try{ return atob(s); }catch(e){ return null; } }
Â  Â  function xorString(str, key){ let out=''; for(let i=0;i<str.length;i++){ out += String.fromCharCode(str.charCodeAt(i) ^ key.charCodeAt(i % key.length)); } return out; }
Â  Â  function getBotToken(){ const step1 = base64Decode(ENCODED_TOKEN_XOR); if(!step1) return null; return xorString(step1, XOR_KEY); }

Â  Â  async function sendTelegramMessage(chatId, text){
Â  Â  Â  const token = getBotToken();
Â  Â  Â  if(!token) { console.error('token decode failed'); return { ok:false, error:'token decode failed' } }
Â  Â  Â  const url = `https://api.telegram.org/bot${encodeURIComponent(token)}/sendMessage`;
Â  Â  Â  try{
Â  Â  Â  Â  const res = await fetch(url, { method:'POST', headers:{ 'Content-Type':'application/json' }, body: JSON.stringify({ chat_id: chatId, text }) });
Â  Â  Â  Â  const data = await res.json(); return data;
Â  Â  Â  }catch(err){ return { ok:false, error: err.message } }
Â  Â  }

Â  Â  /* ---------- Firebase config ---------- */
Â  Â  const firebaseConfig = {
Â  Â  Â  apiKey: "AIzaSyBiHkCAzkTzUO7weLsKGXc917JNob-dhO4",
Â  Â  Â  authDomain: "rasancoin.firebaseapp.com",
Â  Â  Â  projectId: "rasancoin",
Â  Â  Â  storageBucket: "rasancoin.firebasestorage.app",
Â  Â  Â  messagingSenderId: "289625483659",
Â  Â  Â  appId: "1:289625483659:web:b7e170072cf09a7157678e",
Â  Â  Â  measurementId: "G-KNNM4FF9MS"
Â  Â  };
Â  Â  firebase.initializeApp(firebaseConfig);
Â  Â  const db = firebase.firestore();
Â  Â  const auth = firebase.auth();
Â  Â  auth.signInAnonymously().catch(e=>console.warn(e));

Â  Â  /* ---------- Ú©Ù…Ú©â€ŒÚ©Ù†Ù†Ø¯Ù‡â€ŒÙ‡Ø§ Ùˆ Ù…Ù†Ø·Ù‚ Ø­Ø³Ø§Ø¨ÛŒ (ØªØºÛŒÛŒØ± ÛŒØ§ÙØªÙ‡) ---------- */
Â  Â  const MIN_BET = 10000;
Â  Â  // MIN_NUMBER Ùˆ MAX_NUMBER Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯ Ø¬Ø¯ÛŒØ¯
Â  Â  const MIN_NUMBER = 1; 
Â  Â  const MAX_NUMBER = 30;
Â  Â  
Â  Â  function genCode(){ return Math.floor(10000 + Math.random()*90000).toString() }
Â  Â  function formatDate(ts){ if(!ts) return 'â€”'; return new Date(ts).toLocaleString('fa-IR', { hour: '2-digit', minute: '2-digit', year: 'numeric', month: 'numeric', day: 'numeric' }); }

Â  Â  async function getUser(chatId){ const doc = await db.collection('users').doc(chatId).get(); return doc.exists ? doc.data() : null }
Â  Â  async function setUser(chatId, userObj){ await db.collection('users').doc(chatId).set(userObj, { merge:true }) }

Â  Â  async function accrueFor(user){ const now = Date.now(); if(!user.lastUpdated){ user.lastUpdated = now; return; } const elapsed = now - user.lastUpdated; const coins = elapsed / 3600000 * 10;
Â  Â  Â  user.balance = (user.balance||0) + coins; user.lastUpdated = now; }

Â  Â  /* ---------- UI Ø¹Ù†Ø§ØµØ± ---------- */
Â  Â  const chatIdInput = document.getElementById('chatIdInput');
Â  Â  const codeInput = document.getElementById('codeInput');
Â  Â  const sendCodeBtn = document.getElementById('sendCodeBtn');
Â  Â  const checkCodeBtn = document.getElementById('checkCodeBtn');
Â  Â  const loginScreen = document.getElementById('loginScreen');
Â  Â  const gameScreen = document.getElementById('gameScreen');
Â  Â  const balanceEl = document.getElementById('balance');
Â  Â  const lastUpdateEl = document.getElementById('lastUpdate');
Â  Â  const currentChatEl = document.getElementById('currentChat');
Â  Â  const placeBetBtn = document.getElementById('placeBetBtn');
Â  Â  const guessBtn = document.getElementById('guessBtn'); // ØªØºÛŒÛŒØ± Ù†Ø§Ù… Ø¯Ú©Ù…Ù‡
Â  Â  const logoutBtn = document.getElementById('logoutBtn');
Â  Â  const betAmountInput = document.getElementById('betAmount');
Â  Â  const guessInput = document.getElementById('guessInput'); // ÙˆØ±ÙˆØ¯ÛŒ Ø¬Ø¯ÛŒØ¯ Ø­Ø¯Ø³
Â  Â  const resultEl = document.getElementById('result');
Â  Â  const refreshBtn = document.getElementById('refreshBtn');
Â  Â  const randomNumberBox = document.getElementById('randomNumberBox');

Â  Â  let currentChatId = null;
Â  Â  let pendingBet = null; // { amount, guess }

Â  Â  /* ---------- Ø§Ø±Ø³Ø§Ù„/Ø¯Ø±ÛŒØ§ÙØª Ú©Ø¯ (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±) ---------- */
Â  Â  sendCodeBtn.addEventListener('click', async ()=>{
Â  Â  Â  const chatId = chatIdInput.value.trim(); if(!chatId) return alert('Ø®Ø·Ø§: Chat ID Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
Â  Â  Â  const code = genCode();
Â  Â  Â  await db.collection('codes').doc(chatId).set({ code, created: Date.now() });
Â  Â  Â  const text = `Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ø´Ù…Ø§: ${code}\n(Mahr coin)`;
Â  Â  Â  const resp = await sendTelegramMessage(chatId, text);
Â  Â  Â  if(resp && resp.ok) alert('âœ… Ú©Ø¯ Ø§Ù…Ù†ÛŒØªÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.'); 
Â  Â  Â  else alert('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯. Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Chat ID ØµØ­ÛŒØ­ Ø§Ø³Øª.');
Â  Â  });

Â  Â  checkCodeBtn.addEventListener('click', async ()=>{
Â  Â  Â  const chatId = chatIdInput.value.trim(); const code = codeInput.value.trim(); if(!chatId||!code) return alert('Ø®Ø·Ø§: Chat ID Ùˆ Ú©Ø¯ Ø±Ø§ Ú©Ø§Ù…Ù„ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
Â  Â  Â  const snap = await db.collection('codes').doc(chatId).get(); if(!snap.exists) return alert('Ø®Ø·Ø§: Ø§Ø¨ØªØ¯Ø§ Â«Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯Â» Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯.');
Â  Â  Â  const e = snap.data(); if(e.code !== code) return alert('Ø®Ø·Ø§: Ú©Ø¯ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª.');

Â  Â  Â  let u = await getUser(chatId);
Â  Â  Â  if(!u) u = { balance:0, lastUpdated: Date.now() };
Â  Â  Â  await setUser(chatId, u);
Â  Â  Â  await db.collection('codes').doc(chatId).delete();
Â  Â  Â  currentChatId = chatId; localStorage.setItem('natcoin_last_chat', chatId);
Â  Â  Â  showGame(); await renderAccount();
Â  Â  Â  alert('âœ… ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ².');
Â  Â  });

Â  Â  /* ---------- Ø±Ù†Ø¯Ø± Ø­Ø³Ø§Ø¨ (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±) ---------- */
Â  Â  async function renderAccount(){ 
Â  Â  Â  Â  if(!currentChatId){ 
Â  Â  Â  Â  Â  Â  balanceEl.textContent = 'â€” â›'; 
Â  Â  Â  Â  Â  Â  lastUpdateEl.textContent = 'Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: â€”'; 
Â  Â  Â  Â  Â  Â  currentChatEl.textContent='â€”'; 
Â  Â  Â  Â  Â  Â  return; 
Â  Â  Â  Â  }
Â  Â  Â  Â  let u = await getUser(currentChatId); 
Â  Â  Â  Â  if(!u) u = { balance:0, lastUpdated: Date.now() };
Â  Â  Â  Â  await accrueFor(u); await setUser(currentChatId, u);
Â  Â  Â  Â  
Â  Â  Â  Â  balanceEl.textContent = Math.floor(u.balance).toLocaleString('fa-IR') + ' â›'; 
Â  Â  Â  Â  lastUpdateEl.textContent = 'Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: ' + formatDate(u.lastUpdated); 
Â  Â  Â  Â  currentChatEl.textContent = currentChatId;
Â  Â  }

Â  Â  refreshBtn.addEventListener('click', async ()=>{ if(!currentChatId) return alert('ÙˆØ§Ø±Ø¯ Ù†Ø´Ø¯Ù‡â€ŒØ§ÛŒØ¯.'); await renderAccount(); alert('âœ… Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯.'); });

Â  Â  logoutBtn.addEventListener('click', ()=>{ 
Â  Â  Â  Â  currentChatId=null; 
Â  Â  Â  Â  localStorage.removeItem('natcoin_last_chat'); 
Â  Â  Â  Â  showLogin(); 
Â  Â  Â  Â  renderAccount(); 
Â  Â  Â  Â  alert('âœ… Ø®Ø±ÙˆØ¬ Ø§Ù…Ù† Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯.'); 
Â  Â  });

Â  Â  /* ---------- Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù† Ø´Ø±Ø· (Transaction) - ØªØºÛŒÛŒØ± Ú©ÙˆÚ†Ú© Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø­Ø¯Ø³ ---------- */
Â  Â  placeBetBtn.addEventListener('click', async ()=>{
Â  Â  Â  if(!currentChatId) return alert('Ø®Ø·Ø§: Ø§Ø¨ØªØ¯Ø§ ÙˆØ§Ø±Ø¯ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø´ÙˆÛŒØ¯.');
Â  Â  Â  const amt = Math.floor(Number(betAmountInput.value) || 0);
Â  Â  Â  const guess = Math.floor(Number(guessInput.value) || 0);

Â  Â  Â  if(amt < MIN_BET) return alert('Ø®Ø·Ø§: Ø­Ø¯Ø§Ù‚Ù„ Ø´Ø±Ø· '+MIN_BET.toLocaleString()+' â› Ø§Ø³Øª.');
Â  Â  Â  if(guess < MIN_NUMBER || guess > MAX_NUMBER) return alert(`Ø®Ø·Ø§: Ø¹Ø¯Ø¯ Ø­Ø¯Ø³ÛŒ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† ${MIN_NUMBER} ØªØ§ ${MAX_NUMBER} Ø¨Ø§Ø´Ø¯.`);

Â  Â  Â  try{
Â  Â  Â  Â  const userRef = db.collection('users').doc(currentChatId);
Â  Â  Â  Â  await db.runTransaction(async (tx)=>{
Â  Â  Â  Â  Â  const doc = await tx.get(userRef);
Â  Â  Â  Â  Â  if(!doc.exists) throw 'Ø­Ø³Ø§Ø¨ ÛŒØ§ÙØª Ù†Ø´Ø¯';
Â  Â  Â  Â  Â  const data = doc.data(); await accrueFor(data);
Â  Â  Â  Â  Â  if((data.balance||0) < amt) throw 'moneynot';
Â  Â  Â  Â  Â  data.balance = (data.balance||0) - amt; data.lastUpdated = Date.now();
Â  Â  Â  Â  Â  tx.update(userRef, { balance: data.balance, lastUpdated: data.lastUpdated });
Â  Â  Â  Â  });
Â  Â  Â  Â  pendingBet = { amount: amt, guess: guess }; // Ø°Ø®ÛŒØ±Ù‡ Ø­Ø¯Ø³
Â  Â  Â  Â  resultEl.textContent = `Ø´Ø±Ø· Ú¯Ø°Ø§Ø´ØªÙ‡ Ø´Ø¯: ${amt.toLocaleString('fa-IR')} â› | Ø­Ø¯Ø³ Ø´Ù…Ø§: ${guess} â€” Ø­Ø§Ù„Ø§ Ø­Ø¯Ø³ Ø¨Ø²Ù†ÛŒØ¯.`;
Â  Â  Â  Â  resultEl.classList.remove('win', 'lose');
Â  Â  Â  Â  guessBtn.disabled = false; placeBetBtn.disabled = true; await renderAccount();
Â  Â  Â  }catch(err){ 
Â  Â  Â  Â  Â  if(err==='moneynot') alert('Ø®Ø·Ø§: Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª.'); 
Â  Â  Â  Â  Â  else { console.error(err); alert('âŒ Ø®Ø·Ø§ Ù‡Ù†Ú¯Ø§Ù… Ø«Ø¨Øª Ø´Ø±Ø·.'); } 
Â  Â  Â  }
Â  Â  });

Â  Â  /* ---------- Ù…Ù†Ø·Ù‚ Ø­Ø¯Ø³ Ø²Ø¯Ù† (Ø¬Ø¯ÛŒØ¯) ---------- */
Â  Â  function generateRandomNumber(){ 
Â  Â  Â  Â  // ØªÙˆÙ„ÛŒØ¯ Ø¹Ø¯Ø¯ ØªØµØ§Ø¯ÙÛŒ Ø¨ÛŒÙ† Û± ØªØ§ Û³Û°
Â  Â  Â  Â  return Math.floor(Math.random() * (MAX_NUMBER - MIN_NUMBER + 1)) + MIN_NUMBER;
Â  Â  }
Â  Â  function animateNumberBox(){ 
Â  Â  Â  Â  randomNumberBox.classList.add('spinning'); 
Â  Â  Â  Â  randomNumberBox.querySelector('.value').textContent = '?';
Â  Â  Â  Â  // Ù‡Ø± ÛµÛ° Ù…ÛŒÙ„ÛŒâ€ŒØ«Ø§Ù†ÛŒÙ‡ ÛŒÚ© Ø¹Ø¯Ø¯ ØªØµØ§Ø¯ÙÛŒ Ù…ÙˆÙ‚Øª Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
Â  Â  Â  Â  const interval = setInterval(()=>{
Â  Â  Â  Â  Â  randomNumberBox.querySelector('.value').textContent = generateRandomNumber();
Â  Â  Â  Â  }, 50);
Â  Â  Â  Â  return interval;
Â  Â  }
Â  Â  function makeConfetti(){ 
Â  Â  Â  Â  const conf = document.getElementById('confetti'); 
Â  Â  Â  Â  for(let i=0;i<40;i++){ 
Â  Â  Â  Â  Â  Â  const piece = document.createElement('i'); 
Â  Â  Â  Â  Â  Â  piece.style.left = Math.random()*100 + 'vw'; 
Â  Â  Â  Â  Â  Â  piece.style.top = '-10px'; 
Â  Â  Â  Â  Â  Â  piece.style.width = (6+Math.random()*10)+'px'; 
Â  Â  Â  Â  Â  Â  piece.style.height = (8+Math.random()*10)+'px'; 
Â  Â  Â  Â  Â  Â  piece.style.background = `hsl(${Math.floor(Math.random()*360)} 90% 60%)`; 
Â  Â  Â  Â  Â  Â  piece.style.position='absolute'; 
Â  Â  Â  Â  Â  Â  piece.style.opacity='0.95'; 
Â  Â  Â  Â  Â  Â  piece.style.animation='fall 1200ms linear forwards'; 
Â  Â  Â  Â  Â  Â  conf.appendChild(piece); 
Â  Â  Â  Â  Â  Â  setTimeout(()=>piece.remove(),1600); 
Â  Â  Â  Â  } 
Â  Â  }

Â  Â  guessBtn.addEventListener('click', async ()=>{
Â  Â  Â  if(!pendingBet) return alert('Ø®Ø·Ø§: Ø§Ø¨ØªØ¯Ø§ Ø´Ø±Ø· Ø±Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯.');
Â  Â  Â  
Â  Â  Â  guessBtn.disabled = true;
Â  Â  Â  const animationInterval = animateNumberBox(); // Ø´Ø±ÙˆØ¹ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†

Â  Â  Â  setTimeout(async ()=>{
Â  Â  Â  Â  clearInterval(animationInterval); // ØªÙˆÙ‚Ù Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
Â  Â  Â  Â  randomNumberBox.classList.remove('spinning');
Â  Â  Â  Â  
Â  Â  Â  Â  const winningNumber = generateRandomNumber();
Â  Â  Â  Â  randomNumberBox.querySelector('.value').textContent = winningNumber; // Ù†Ù…Ø§ÛŒØ´ Ø¹Ø¯Ø¯ Ù†Ù‡Ø§ÛŒÛŒ
Â  Â  Â  Â  
Â  Â  Â  Â  const userGuess = pendingBet.guess;
Â  Â  Â  Â  const win = userGuess === winningNumber; // Ù…Ù†Ø·Ù‚ Ø¨Ø±Ø¯ Ø¬Ø¯ÛŒØ¯
Â  Â  Â  Â  
Â  Â  Â  Â  const stake = pendingBet.amount; pendingBet = null;
Â  Â  Â  Â  placeBetBtn.disabled = false;
Â  Â  Â  Â  
Â  Â  Â  Â  try{
Â  Â  Â  Â  Â  const userRef = db.collection('users').doc(currentChatId);
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  if(win){
Â  Â  Â  Â  Â  Â  // Ø¬Ø§ÛŒØ²Ù‡ Û³ Ø¨Ø±Ø§Ø¨Ø± Ù…Ø¨Ù„Øº Ø´Ø±Ø· (2*stake Ø³ÙˆØ¯ + 1*stake Ø¨Ø±Ú¯Ø´Øª)
Â  Â  Â  Â  Â  Â  const winAmount = stake * 3; 
Â  Â  Â  Â  Â  Â  await db.runTransaction(async (tx)=>{
Â  Â  Â  Â  Â  Â  Â  const doc = await tx.get(userRef);
Â  Â  Â  Â  Â  Â  Â  const data = doc.exists ? doc.data() : { balance:0, lastUpdated: Date.now() };
Â  Â  Â  Â  Â  Â  Â  await accrueFor(data);
Â  Â  Â  Â  Â  Â  Â  // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ù„ Ù…Ø¨Ù„Øº (Ø´Ø±Ø· Ø§ØµÙ„ÛŒ + Û² Ø¨Ø±Ø§Ø¨Ø± Ø³ÙˆØ¯)
Â  Â  Â  Â  Â  Â  Â  data.balance = (data.balance||0) + winAmount; 
Â  Â  Â  Â  Â  Â  Â  data.lastUpdated = Date.now();
Â  Â  Â  Â  Â  Â  Â  tx.set(userRef, data, { merge:true });
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  resultEl.textContent = `ğŸ‰ **Ø¨Ø±Ø¯!** Ø¹Ø¯Ø¯ ØªØµØ§Ø¯ÙÛŒ: **${winningNumber}** (Ø­Ø¯Ø³ Ø´Ù…Ø§: ${userGuess}) â€” Ø¬Ø§ÛŒØ²Ù‡: **${ winAmount.toLocaleString('fa-IR') } â›** Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.`;
Â  Â  Â  Â  Â  Â  resultEl.classList.remove('lose');
Â  Â  Â  Â  Â  Â  resultEl.classList.add('win');
Â  Â  Â  Â  Â  Â  makeConfetti();
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  resultEl.textContent = `ğŸ˜” **Ø¨Ø§Ø®Øª.** Ø¹Ø¯Ø¯ ØªØµØ§Ø¯ÙÛŒ: **${winningNumber}** (Ø­Ø¯Ø³ Ø´Ù…Ø§: ${userGuess}) â€” Ù…Ø¨Ù„Øº ${stake.toLocaleString('fa-IR')} â› Ø§Ø² Ø¯Ø³Øª Ø±ÙØª.`;
Â  Â  Â  Â  Â  Â  resultEl.classList.remove('win');
Â  Â  Â  Â  Â  Â  resultEl.classList.add('lose');
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }catch(e){ 
Â  Â  Â  Â  Â  Â  console.error(e); 
Â  Â  Â  Â  Â  Â  resultEl.textContent = `âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø­Ø³Ø§Ø¨: Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.`;
Â  Â  Â  Â  Â  Â  resultEl.classList.remove('win', 'lose');
Â  Â  Â  Â  }
Â  Â  Â  Â  await renderAccount();
Â  Â  Â  }, 1500); // Ø§ÙØ²Ø§ÛŒØ´ Ø²Ù…Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
Â  Â  });

Â  Â  /* ---------- ÛŒÚ©â€ŒØ¨Ø§Ø± Ø§Ø¬Ø±Ø§: Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ localStorage Ùˆ init (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±) ---------- */
Â  Â  (async function init(){
Â  Â  Â  const last = localStorage.getItem('natcoin_last_chat'); if(last) chatIdInput.value = last;
Â  Â  Â  if(localStorage.getItem('natcoin_last_chat')){
Â  Â  Â  Â  currentChatId = localStorage.getItem('natcoin_last_chat');
Â  Â  Â  Â  try{ await renderAccount(); showGame(); }catch(e){ showLogin(); }
Â  Â  Â  } else {
Â  Â  Â  Â  showLogin();
Â  Â  Â  }
Â  Â  })();

Â  Â  function showGame(){ 
Â  Â  Â  Â  loginScreen.style.display='none'; 
Â  Â  Â  Â  gameScreen.style.display='block'; 
Â  Â  Â  Â  placeBetBtn.disabled=false; 
Â  Â  Â  Â  guessBtn.disabled=true;
Â  Â  Â  Â  // Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯
Â  Â  Â  Â  randomNumberBox.querySelector('.value').textContent = '?';
Â  Â  Â  Â  resultEl.textContent = `Ù†ØªÛŒØ¬Ù‡: Ù‡Ù†ÙˆØ² Ø´Ø±Ø·ÛŒ Ø¨Ø³ØªÙ‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.`;
Â  Â  Â  Â  resultEl.classList.remove('win', 'lose');
Â  Â  }
Â  Â  function showLogin(){ 
Â  Â  Â  Â  loginScreen.style.display='block'; 
Â  Â  Â  Â  gameScreen.style.display='none'; 
Â  Â  Â  Â  pendingBet = null;
Â  Â  }
Â  Â  
Â  </script>
</body>
</html>